import streamlit as st
import pandas as pd
import time

# ุฅุนุฏุงุฏุงุช ุงูุตูุญุฉ
st.set_page_config(page_title="ุฑุงุฏุงุฑ ุงูููุงุต V42.2", layout="wide")

st.title("๐ฏ ุฑุงุฏุงุฑ ุงูููุงุต - ุชุชุจุน ุตููุงุช ุงูุญูุชุงู (Whale Flow)")
st.write("ูุฐู ุงููุณุฎุฉ ุชุนุฑุถ ุจูุงูุงุช ุชุฌุฑูุจูุฉ ููุญุงูุงุฉ ุญุฑูุฉ ุงูุณูู ุงูุญููููุฉ")

# ูุงุฆูุฉ ุฌุงูุจูุฉ ููุชุญูู
st.sidebar.header("ุฅุนุฏุงุฏุงุช ุงูุฑุงุฏุงุฑ")
budget = st.sidebar.slider("ุญุฏุฏ ููุฒุงููุฉ ุงูุนูุฏ ($)", 10, 500, 150)
refresh_rate = st.sidebar.selectbox("ุณุฑุนุฉ ุงูุชุญุฏูุซ (ุซูุงูู)", [5, 10, 30])

# ุฏุงูุฉ ูุชูููุฏ ุจูุงูุงุช ููููุฉ (Mock Data)
def get_mock_whale_flow():
    data = [
        {"ุงูุณูู": "NVDA", "ุงูููุน": "CALL", "ุงูุณุชุฑุงูู": 145, "ุงูุชุงุฑูุฎ": "2026-02-15", "ุงูุณุนุฑ": 1.25, "ุงููููุฉ": "$150K", "ุงูุญุงูุฉ": "๐ฅ ุฐูุจูุฉ"},
        {"ุงูุณูู": "TSLA", "ุงูููุน": "PUT", "ุงูุณุชุฑุงูู": 230, "ุงูุชุงุฑูุฎ": "2026-02-05", "ุงูุณุนุฑ": 0.85, "ุงููููุฉ": "$45K", "ุงูุญุงูุฉ": "โ๏ธ ุชุญูุท"},
        {"ุงูุณูู": "AAPL", "ุงูููุน": "CALL", "ุงูุณุชุฑุงูู": 240, "ุงูุชุงุฑูุฎ": "2026-03-20", "ุงูุณุนุฑ": 2.10, "ุงููููุฉ": "$2.1M", "ุงูุญุงูุฉ": "๐ ูุคุณุณุงุชูุฉ"},
        {"ุงูุณูู": "PLTR", "ุงูููุน": "CALL", "ุงูุณุชุฑุงูู": 42, "ุงูุชุงุฑูุฎ": "2026-02-12", "ุงูุณุนุฑ": 0.65, "ุงููููุฉ": "$90K", "ุงูุญุงูุฉ": "๐ฅ ุฐูุจูุฉ"},
    ]
    return pd.DataFrame(data)

# ููุชุฑุฉ ุงูุจูุงูุงุช ุจูุงุกู ุนูู ุงูููุฒุงููุฉ
df = get_mock_whale_flow()
filtered_df = df[df['ุงูุณุนุฑ'] * 100 <= budget]

# ุนุฑุถ ุงููุชุงุฆุฌ
st.subheader(f"โ ุตููุงุช ุชูุงุณุจ ููุฒุงููุชู (ุฃูู ูู ${budget})")
if not filtered_df.empty:
    st.table(filtered_df)
else:
    st.warning("ูุง ุชูุฌุฏ ุตููุงุช ุชูุงุณุจ ููุฒุงููุชู ุญุงููุงู.")

st.divider()

# ูุณู ุงูุชุนูููุงุช ุงูุณุฑูุนุฉ ููููุตุงุช
st.info("""
**๐ก ููู ุชุณุชููุฏ ูู ูุฐู ุงูุจูุงูุงุช ูู ููุตุฉ ุณููุ**
1. ุงูุธุฑ ูุนููุฏ 'ุงูุณูู' ู 'ุงูุณุชุฑุงูู'.
2. ุงูุชุญ ุชุทุจูู ุณูู ูุงุจุญุซ ุนู ููุณ ุงูุณูู ูู ูุณู ุงูุฎูุงุฑุงุช (Options).
3. ุงุฎุชุฑ ููุณ ุงูุชุงุฑูุฎ ูุงูุณุชุฑุงูู ููู ุจุงูุดุฑุงุก ูุฏููุงู.
""")

# ุฅุถุงูุฉ ููุฒุฉ ุงูุชุญุฏูุซ ุงูุชููุงุฆู ุงููููู
if st.sidebar.button('ุจุฏุก ุงูุฑุตุฏ ุงููุญุธู'):
    with st.empty():
        for i in range(10):
            st.write(f"๐ ุฌุงุฑู ูุญุต ุงูุณูู... ูุญุงููุฉ ุฑูู {i+1}")
            time.sleep(refresh_rate)
